<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="description" content="You can give donations to r-neal-kelly" />

  <title>Donate a Gift</title>

  <link rel="stylesheet" href="css/normalize.css" />
  <link rel="stylesheet" href="css/global.css" />

  <!-- Load Stripe.js on your website. -->
  <script src="https://js.stripe.com/v3/"></script>
</head>

<body>
  <div class="sr-root">
    <div class="sr-main" style="display: flex;">
      <header class="sr-header">
        <div class="sr-header__logo"></div>
      </header>
      <div class="sr-container">
        <section class="container">
          <h1>One-time Donation</h1>
          <button data-checkout-mode="payment" data-price-id="price_1JQGhXANEfn5pVEYbgMZNvQK">
            Donate $5.00 once
          </button>
          <button data-checkout-mode="payment" data-price-id="price_1JQGhXANEfn5pVEYyfoxjQoU">
            Donate $15.00 once
          </button>
          <button data-checkout-mode="payment" data-price-id="price_1JQGhXANEfn5pVEYvFpO99Cp">
            Donate $50.00 once
          </button>
        </section>
        <section class="container">
          <h1>Recurring Donation</h1>
          <button data-checkout-mode="subscription" data-price-id="price_1JQGhXANEfn5pVEYmqet0LN5">
            Donate $20.00 per month
          </button>
        </section>
      </div>
      <div id="error-message"></div>
    </div>
  </div>
  <div class="banner">
    <span>
      <a href="https://r-neal-kelly.github.io">
        go to my blog
      </a>
    </span>
  </div>

  <script>
    // Replace with your own publishable key: https://dashboard.stripe.com/apikeys
    var PUBLISHABLE_KEY = 'pk_test_51JPwJtANEfn5pVEYI4Qr4OY7qFB11MTcxfM6ProZF8HjZxAsOG8TxceyLPTU9SGFFmJpPX4sBvLr99fJyXJXzIOv00bL402bZU';
    var stripe = Stripe(PUBLISHABLE_KEY);

    // Handle any errors from Checkout
    var handleResult = function (result) {
      if (result.error) {
        var displayError = document.getElementById('error-message');
        displayError.textContent = result.error.message;
      }
    };

    document.querySelectorAll('button').forEach(function (button) {
      button.addEventListener('click', function (e) {
        var mode = e.target.dataset.checkoutMode;
        var priceId = e.target.dataset.priceId;
        var items = [{ price: priceId, quantity: 1 }];

        // Make the call to Stripe.js to redirect to the checkout page
        stripe
          .redirectToCheckout({
            mode: mode,
            lineItems: items,
            successUrl:
              `https://r-neal-kelly.github.io/give-to-r-neal-kelly/success.html?session_id={CHECKOUT_SESSION_ID}`,
            cancelUrl:
              `https://r-neal-kelly.github.io/give-to-r-neal-kelly/canceled.html?session_id={CHECKOUT_SESSION_ID}`,
          })
          .then(handleResult);
      });
    });
  </script>
</body>

</html>